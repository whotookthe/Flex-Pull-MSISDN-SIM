(function() {
    let extractedData = [];

    // Function to find the next sibling text content after the target
    function findNextTextContent(element) {
        let nextElement = element.nextElementSibling;
        return nextElement ? nextElement.textContent.trim() : null;
    }

    // Select all relevant elements on the page (you can modify the selectors if needed)
    let elements = document.querySelectorAll('p, div, span');
    
    console.log('Scanning page for Line Numbers and SIM Serial Numbers...');

    elements.forEach(function(element) {
        let text = element.textContent.trim();
        console.log(`Checking element: "${text}"`);

        // Check for "Line Number"
        if (text.includes('Line Number')) {
            let lineNumber = findNextTextContent(element);
            if (lineNumber) {
                extractedData.push(lineNumber);  // Only store the number, not the label
                console.log(`Found Line Number: ${lineNumber}`);
            }
        }

        // Check for "SIM Serial Number"
        if (text.includes('SIM Serial Number')) {
            let simSerial = findNextTextContent(element);
            if (simSerial) {
                extractedData.push(simSerial);  // Only store the number, not the label
                console.log(`Found SIM Serial Number: ${simSerial}`);
            }
        }
    });

    // If any data was found, create the text file
    if (extractedData.length === 0) {
        console.warn('No matching Line Number or SIM Serial Number found.');
    } else {
        // Join all the found data into a single string with line breaks
        let fileContent = extractedData.join('\n');

        console.log('Extracted Data:', fileContent);

        // Create a Blob object with the extracted content
        let blob = new Blob([fileContent], { type: 'text/plain' });

        // Create a download link and trigger the download
        let link = document.createElement('a');
        link.href = window.URL.createObjectURL(blob);
        link.download = 'extracted_data.txt'; // Set the file name for download

        // Append the link element to the body and simulate a click to trigger the download
        document.body.appendChild(link);
        link.click();

        // Clean up the link element
        document.body.removeChild(link);
    }
})();
